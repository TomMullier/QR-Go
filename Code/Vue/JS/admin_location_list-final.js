(()=>{"use strict";var e={d:(t,n)=>{for(var o in n)e.o(n,o)&&!e.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:n[o]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};e.d({},{Z:()=>u});let t=io();function n(){t.emit("getAllLocation")}t.on("addLocationFailed",(()=>{console.log("failed")})),t.on("addLocationSuccess",(()=>{console.log("success"),n()})),t.on("refreshAllLocation",(e=>{u.refreshAllLocation(e)}));const o={addLocation:function(e,n,o){t.emit("addLocation",e,n,o)},getAllLocation:n,modifyLocation:function(e,n,o){t.emit("modifyLocation",e,n,o)},deleteLocation:function(e){t.emit("deleteLocation",e)}};let l=document.getElementsByClassName("route_element_desc_text"),a=document.getElementsByClassName("expand_button");function d(){a.forEach((function(e){e.addEventListener("click",(function(e){console.log(e.target),l.forEach((function(e){e.style.overflow="hidden",e.style.lineClamp=3,e.style.display="-webkit-box"}));let t=e.target.parentElement.parentElement.getElementsByClassName("route_element_desc_text")[0];t.style.overflow="visible",t.style.lineClamp=999999,t.style.display="flex"}))}))}l=Array.from(l),a=Array.from(a),d();let c=document.getElementById("location_name"),i=document.getElementById("location_desc"),s=document.getElementById("location_instruction"),m=document.getElementById("title_txt");document.getElementById("new_location_button").addEventListener("click",(function(e){modals.show("create_location_modal"),m.innerText="Create Location",c.value="",i.value="",s.value="",document.activeElement!=document.body&&document.activeElement.blur(),document.getElementById("validate").setAttribute("existing","false"),document.getElementById("delete").innerHTML="",document.getElementById("getQrCode").innerHTML=""})),document.getElementById("validate").addEventListener("click",(e=>{let t=c.value,n=i.value,l=s.value;""!=t&&null!=t&&("false"==document.getElementById("validate").getAttribute("existing")?o.addLocation(t.toUpperCase(),n,l):o.modifyLocation(t.toUpperCase(),n,l))}));let r=document.getElementsByClassName("route-element");r=Array.from(r),console.log(r),document.getElementById("delete").addEventListener("click",(()=>{o.deleteLocation(c.value.toUpperCase())})),document.getElementById("searchBar").addEventListener("input",(function(){const e=document.getElementById("searchBar").value.toLowerCase();let t=document.getElementsByClassName("titles"),n=document.getElementsByClassName("auteur");t=Array.from(t),listNames=Array.from(n);for(let n=0;n<t.length;n++){let o=t[n].innerText,l=listNames[n].innerText;if(o.toLowerCase().includes(e)){t[n].parentElement.parentElement.style.display=""}else if(l.toLowerCase().includes(e)){listNames[n].parentElement.parentElement.style.display=""}else{t[n].parentElement.parentElement.style.display="none"}}})),o.getAllLocation();const u={refreshAllLocation:function(e){document.getElementById("scroll_list").innerHTML="",e.forEach((e=>{!function(e,t,n){const o=document.createElement("div");o.classList.add("route-element"),r.push(o);const c=document.createElement("div");c.classList.add("route-element-top");const i=document.createElement("h1");i.classList.add("titles"),i.textContent=e,c.appendChild(i);const s=document.createElement("div");s.classList.add("top");const m=document.createElement("b");m.textContent="Click to Modify",s.appendChild(m),c.appendChild(s),o.appendChild(c);const u=document.createElement("div");u.classList.add("route-element-desc");const E=document.createElement("p");E.classList.add("route_element_desc_text"),E.textContent=t,l.push(E),u.appendChild(E);const p=document.createElement("div");p.classList.add("show_more_container");const y=document.createElement("div");y.classList.add("qr_container"),y.id="qr_container";const g=document.createElement("img");g.id="getQrCode",g.src="../../img/qr_code.png",y.appendChild(g),p.appendChild(y);const L=document.createElement("a");L.classList.add("expand_button"),L.textContent="Show more",a.push(L),p.appendChild(L),u.appendChild(p),o.appendChild(u);const C=document.createElement("div");C.classList.add("route-element-bottom");const f=document.createElement("h6");f.classList.add("auteur"),f.textContent=n,C.appendChild(f),o.appendChild(C),document.getElementById("scroll_list").appendChild(o),d()}(e.name,e.description,e.instruction)})),document.getElementById("getQrCode").addEventListener("click",(()=>{c.value})),r.forEach((function(e){e.addEventListener("click",(function(t){t.target.classList.contains("expand_button")||"getQrCode"==t.target.id||(m.innerText="Edit Location",c.value=e.getElementsByClassName("titles")[0].innerText,i.value=e.getElementsByClassName("route_element_desc_text")[0].innerText,s.value=e.getElementsByClassName("auteur")[0].innerText,document.getElementById("validate").setAttribute("existing","true"),document.getElementById("delete").innerHTML="Delete",document.getElementById("getQrCode").innerHTML="Get QR code",modals.show("create_location_modal"),document.activeElement!=document.body&&document.activeElement.blur())}))}))}}})();